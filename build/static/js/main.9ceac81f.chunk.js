(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(2),r=t.n(a),o=t(14),s=t.n(o),i=(t(20),t(3)),u=t(4),l=t.n(u),d="/api/persons",f=function(){return l.a.get(d).then((function(e){return e.data}))},j=function(e){return l.a.post(d,e).then((function(e){return e.data}))},b=function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))};var m=function(e){var n=e.message,t=e.className;if(null===n)return null;var a="notification ".concat(t);return Object(c.jsx)("div",{className:a,children:n})},O=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(""),s=Object(i.a)(o,2),u=s[0],l=s[1],d=Object(a.useState)(""),O=Object(i.a)(d,2),p=O[0],v=O[1],g=Object(a.useState)(""),x=Object(i.a)(g,2),w=x[0],C=x[1],y=Object(a.useState)({message:null,typeOfClass:""}),k=Object(i.a)(y,2),S=k[0],N=k[1];Object(a.useEffect)((function(){f().then((function(e){r(e)}))}),[]);var E=function(e){N(e),setTimeout((function(){N({message:null,typeOfClass:""})}),5e3)},A=w?t.filter((function(e){return n=e.name,new RegExp(w,"gi").test(n.toString());var n})):t;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(m,{message:S.message,className:S.typeOfClass}),Object(c.jsxs)("div",{children:["filter shown with:\xa0",Object(c.jsx)("input",{value:w,onChange:function(e){return C(e.target.value)}})]}),Object(c.jsx)("h2",{children:"Add a new numbers"}),Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{children:["name:\xa0",Object(c.jsx)("input",{value:u,onChange:function(e){return l(e.target.value)}})]}),Object(c.jsxs)("div",{style:{marginTop:"10px"},children:["number:\xa0",Object(c.jsx)("input",{value:p,onChange:function(e){return v(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(e){e.preventDefault();var n={name:u,number:p};t.some((function(e){return e.name===u&&(window.confirm("".concat(u," is already added to phonebook, replace the old number with a new one?"))&&b(e.id,n).then((function(n){r(t.map((function(t){return t.id!==e.id?t:n}))),E({message:"".concat(u," updated"),typeOfClass:"info"})})),!0)}))||j(n).then((function(e){r(t.concat(e)),l(""),v(""),E({message:"Added ".concat(e.name),typeOfClass:"info"})})).catch((function(e){console.log(e.response.data),E({message:"".concat(u," not added"),typeOfClass:"error"})}))},children:"add"})})]}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)("ul",{children:A.map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("li",{children:[e.name,":",e.number]}),Object(c.jsx)("button",{onClick:function(){return function(e){var n=e.name,c=e.id;if(!window.confirm("Delete ".concat(n," ?")))return null;h(c).then((function(){r(t.filter((function(e){return e.id!==c}))),E({message:"".concat(n," was removed"),typeOfClass:"info"})})).catch((function(e){console.log(e),E({message:"Information of ".concat(n," has already been removed from server"),typeOfClass:"error"}),r(t.filter((function(e){return e.id!==c})))}))}(e)},children:"delete"})]},e.name)}))})]})};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(O,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.9ceac81f.chunk.js.map